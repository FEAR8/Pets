<?php
    require('../config/database.php');

    if (isset($_GET['id'])) {
        $user_id = $_GET['id'];

        // Preparar y ejecutar la consulta para eliminar el usuario
        $sql_validate_id = "SELECT * FROM users WHERE id = $1";
        $result = pg_query_params($conn, $sql_validate_id, array($user_id));

        if ($result) {
            if (pg_num_rows($result) > 0) {
                // El usuario existe, proceder a eliminar
                $sql_delete = "DELETE FROM users WHERE id = $1";
                $delete_result = pg_query_params($conn, $sql_delete, array($user_id));

                if ($delete_result) {
                    echo 'Usuario eliminado con éxito.';
                } else {
                    echo 'Error al eliminar el usuario.';
                }
            } else {
                echo 'No se encontró un usuario con ese ID.';
            }
        } else {
            echo 'Error al validar el ID del usuario.';
        }
    } else {
        echo 'No se proporcionó un ID de usuario.';
    }
?>
